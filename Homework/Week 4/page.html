<!DOCTYPE html>

<html>
	<head>
		<link rel="stylesheet" type="text/css" href="style.css">
		<h2><center>Temperature in de Bilt from 05-04-1993 to 04-04-1994</center></h2>
	</head>
	<body>
		<link rel="stylesheet" type="text/css" href="style.css">
		<textarea id="dataset" style="display:none;">
			[["1993/04/05", "103"], ["1993/04/06", "106"], ["1993/04/07", "92"], ["1993/04/08", "101"], ["1993/04/09", "131"], ["1993/04/10", "129"], ["1993/04/11", "109"], ["1993/04/12", "125"], ["1993/04/13", "130"], ["1993/04/14", "143"], ["1993/04/15", "144"], ["1993/04/16", "157"], ["1993/04/17", "113"], ["1993/04/18", "133"], ["1993/04/19", "120"], ["1993/04/20", "218"], ["1993/04/21", "210"], ["1993/04/22", "180"], ["1993/04/23", "192"], ["1993/04/24", "218"], ["1993/04/25", "202"], ["1993/04/26", "209"], ["1993/04/27", "236"], ["1993/04/28", "269"], ["1993/04/29", "268"], ["1993/04/30", "269"], ["1993/05/01", "234"], ["1993/05/02", "130"], ["1993/05/03", "125"], ["1993/05/04", "139"], ["1993/05/05", "136"], ["1993/05/06", "153"], ["1993/05/07", "147"], ["1993/05/08", "194"], ["1993/05/09", "253"], ["1993/05/10", "252"], ["1993/05/11", "261"], ["1993/05/12", "252"], ["1993/05/13", "158"], ["1993/05/14", "144"], ["1993/05/15", "153"], ["1993/05/16", "189"], ["1993/05/17", "245"], ["1993/05/18", "219"], ["1993/05/19", "212"], ["1993/05/20", "229"], ["1993/05/21", "157"], ["1993/05/22", "195"], ["1993/05/23", "219"], ["1993/05/24", "255"], ["1993/05/25", "244"], ["1993/05/26", "241"], ["1993/05/27", "157"], ["1993/05/28", "131"], ["1993/05/29", "205"], ["1993/05/30", "208"], ["1993/05/31", "171"], ["1993/06/01", "202"], ["1993/06/02", "224"], ["1993/06/03", "175"], ["1993/06/04", "212"], ["1993/06/05", "237"], ["1993/06/06", "238"], ["1993/06/07", "244"], ["1993/06/08", "266"], ["1993/06/09", "290"], ["1993/06/10", "289"], ["1993/06/11", "227"], ["1993/06/12", "159"], ["1993/06/13", "174"], ["1993/06/14", "140"], ["1993/06/15", "177"], ["1993/06/16", "146"], ["1993/06/17", "196"], ["1993/06/18", "171"], ["1993/06/19", "184"], ["1993/06/20", "196"], ["1993/06/21", "185"], ["1993/06/22", "186"], ["1993/06/23", "182"], ["1993/06/24", "173"], ["1993/06/25", "159"], ["1993/06/26", "184"], ["1993/06/27", "188"], ["1993/06/28", "184"], ["1993/06/29", "240"], ["1993/06/30", "263"], ["1993/07/01", "248"], ["1993/07/02", "235"], ["1993/07/03", "237"], ["1993/07/04", "265"], ["1993/07/05", "177"], ["1993/07/06", "182"], ["1993/07/07", "175"], ["1993/07/08", "231"], ["1993/07/09", "231"], ["1993/07/10", "178"], ["1993/07/11", "171"], ["1993/07/12", "173"], ["1993/07/13", "190"], ["1993/07/14", "179"], ["1993/07/15", "181"], ["1993/07/16", "226"], ["1993/07/17", "202"], ["1993/07/18", "211"], ["1993/07/19", "181"], ["1993/07/20", "195"], ["1993/07/21", "179"], ["1993/07/22", "197"], ["1993/07/23", "219"], ["1993/07/24", "240"], ["1993/07/25", "188"], ["1993/07/26", "183"], ["1993/07/27", "175"], ["1993/07/28", "208"], ["1993/07/29", "227"], ["1993/07/30", "186"], ["1993/07/31", "190"], ["1993/08/01", "195"], ["1993/08/02", "243"], ["1993/08/03", "209"], ["1993/08/04", "215"], ["1993/08/05", "210"], ["1993/08/06", "186"], ["1993/08/07", "223"], ["1993/08/08", "215"], ["1993/08/09", "186"], ["1993/08/10", "172"], ["1993/08/11", "183"], ["1993/08/12", "192"], ["1993/08/13", "197"], ["1993/08/14", "224"], ["1993/08/15", "231"], ["1993/08/16", "209"], ["1993/08/17", "198"], ["1993/08/18", "217"], ["1993/08/19", "220"], ["1993/08/20", "209"], ["1993/08/21", "215"], ["1993/08/22", "147"], ["1993/08/23", "167"], ["1993/08/24", "180"], ["1993/08/25", "177"], ["1993/08/26", "184"], ["1993/08/27", "157"], ["1993/08/28", "182"], ["1993/08/29", "191"], ["1993/08/30", "174"], ["1993/08/31", "180"], ["1993/09/01", "182"], ["1993/09/02", "167"], ["1993/09/03", "163"], ["1993/09/04", "165"], ["1993/09/05", "179"], ["1993/09/06", "191"], ["1993/09/07", "205"], ["1993/09/08", "208"], ["1993/09/09", "210"], ["1993/09/10", "189"], ["1993/09/11", "188"], ["1993/09/12", "195"], ["1993/09/13", "138"], ["1993/09/14", "144"], ["1993/09/15", "175"], ["1993/09/16", "145"], ["1993/09/17", "120"], ["1993/09/18", "155"], ["1993/09/19", "189"], ["1993/09/20", "232"], ["1993/09/21", "192"], ["1993/09/22", "167"], ["1993/09/23", "176"], ["1993/09/24", "157"], ["1993/09/25", "130"], ["1993/09/26", "124"], ["1993/09/27", "141"], ["1993/09/28", "139"], ["1993/09/29", "162"], ["1993/09/30", "147"], ["1993/10/01", "151"], ["1993/10/02", "163"], ["1993/10/03", "129"], ["1993/10/04", "171"], ["1993/10/05", "181"], ["1993/10/06", "171"], ["1993/10/07", "164"], ["1993/10/08", "164"], ["1993/10/09", "144"], ["1993/10/10", "155"], ["1993/10/11", "177"], ["1993/10/12", "175"], ["1993/10/13", "164"], ["1993/10/14", "117"], ["1993/10/15", "113"], ["1993/10/16", "88"], ["1993/10/17", "114"], ["1993/10/18", "92"], ["1993/10/19", "96"], ["1993/10/20", "96"], ["1993/10/21", "104"], ["1993/10/22", "94"], ["1993/10/23", "87"], ["1993/10/24", "89"], ["1993/10/25", "108"], ["1993/10/26", "123"], ["1993/10/27", "106"], ["1993/10/28", "106"], ["1993/10/29", "105"], ["1993/10/30", "80"], ["1993/10/31", "39"], ["1993/11/01", "31"], ["1993/11/02", "50"], ["1993/11/03", "114"], ["1993/11/04", "173"], ["1993/11/05", "100"], ["1993/11/06", "67"], ["1993/11/07", "62"], ["1993/11/08", "73"], ["1993/11/09", "108"], ["1993/11/10", "89"], ["1993/11/11", "103"], ["1993/11/12", "97"], ["1993/11/13", "91"], ["1993/11/14", "115"], ["1993/11/15", "86"], ["1993/11/16", "44"], ["1993/11/17", "49"], ["1993/11/18", "20"], ["1993/11/19", "36"], ["1993/11/20", "19"], ["1993/11/21", "-14"], ["1993/11/22", "-24"], ["1993/11/23", "2"], ["1993/11/24", "3"], ["1993/11/25", "35"], ["1993/11/26", "17"], ["1993/11/27", "-19"], ["1993/11/28", "-5"], ["1993/11/29", "15"], ["1993/11/30", "-10"], ["1993/12/01", "17"], ["1993/12/02", "99"], ["1993/12/03", "99"], ["1993/12/04", "110"], ["1993/12/05", "79"], ["1993/12/06", "78"], ["1993/12/07", "69"], ["1993/12/08", "108"], ["1993/12/09", "98"], ["1993/12/10", "81"], ["1993/12/11", "63"], ["1993/12/12", "56"], ["1993/12/13", "100"], ["1993/12/14", "36"], ["1993/12/15", "39"], ["1993/12/16", "72"], ["1993/12/17", "77"], ["1993/12/18", "119"], ["1993/12/19", "134"], ["1993/12/20", "74"], ["1993/12/21", "42"], ["1993/12/22", "68"], ["1993/12/23", "58"], ["1993/12/24", "51"], ["1993/12/25", "21"], ["1993/12/26", "30"], ["1993/12/27", "42"], ["1993/12/28", "33"], ["1993/12/29", "78"], ["1993/12/30", "85"], ["1993/12/31", "80"], ["1994/01/01", "55"], ["1994/01/02", "81"], ["1994/01/03", "89"], ["1994/01/04", "84"], ["1994/01/05", "87"], ["1994/01/06", "81"], ["1994/01/07", "61"], ["1994/01/08", "43"], ["1994/01/09", "41"], ["1994/01/10", "61"], ["1994/01/11", "64"], ["1994/01/12", "122"], ["1994/01/13", "122"], ["1994/01/14", "82"], ["1994/01/15", "68"], ["1994/01/16", "51"], ["1994/01/17", "41"], ["1994/01/18", "40"], ["1994/01/19", "32"], ["1994/01/20", "59"], ["1994/01/21", "63"], ["1994/01/22", "89"], ["1994/01/23", "104"], ["1994/01/24", "65"], ["1994/01/25", "116"], ["1994/01/26", "73"], ["1994/01/27", "109"], ["1994/01/28", "60"], ["1994/01/29", "83"], ["1994/01/30", "98"], ["1994/01/31", "77"], ["1994/02/01", "72"], ["1994/02/02", "69"], ["1994/02/03", "49"], ["1994/02/04", "73"], ["1994/02/05", "58"], ["1994/02/06", "76"], ["1994/02/07", "64"], ["1994/02/08", "86"], ["1994/02/09", "82"], ["1994/02/10", "77"], ["1994/02/11", "43"], ["1994/02/12", "30"], ["1994/02/13", "-1"], ["1994/02/14", "-10"], ["1994/02/15", "25"], ["1994/02/16", "54"], ["1994/02/17", "46"], ["1994/02/18", "44"], ["1994/02/19", "40"], ["1994/02/20", "-2"], ["1994/02/21", "-23"], ["1994/02/22", "-13"], ["1994/02/23", "23"], ["1994/02/24", "7"], ["1994/02/25", "36"], ["1994/02/26", "113"], ["1994/02/27", "113"], ["1994/02/28", "112"], ["1994/03/01", "82"], ["1994/03/02", "73"], ["1994/03/03", "90"], ["1994/03/04", "101"], ["1994/03/05", "127"], ["1994/03/06", "100"], ["1994/03/07", "121"], ["1994/03/08", "123"], ["1994/03/09", "97"], ["1994/03/10", "102"], ["1994/03/11", "107"], ["1994/03/12", "96"], ["1994/03/13", "108"], ["1994/03/14", "121"], ["1994/03/15", "102"], ["1994/03/16", "87"], ["1994/03/17", "68"], ["1994/03/18", "89"], ["1994/03/19", "92"], ["1994/03/20", "74"], ["1994/03/21", "81"], ["1994/03/22", "86"], ["1994/03/23", "128"], ["1994/03/24", "112"], ["1994/03/25", "108"], ["1994/03/26", "90"], ["1994/03/27", "88"], ["1994/03/28", "128"], ["1994/03/29", "139"], ["1994/03/30", "189"], ["1994/03/31", "166"], ["1994/04/01", "118"], ["1994/04/02", "91"], ["1994/04/03", "97"], ["1994/04/04", "112"]]
		</textarea>
		
		<div class="wrapper">
			<canvas id="canvas" height="550" width="1000">
				Sorry, your browser does not support the canvas element.
			</canvas>
			<canvas id="crosshair" height="550" width="1000">
				Sorry, your browser does not support the canvas element.
			</canvas>
		<div id="tempdiv" style="position:absolute; visibility:hidden">
		</div>	
		<div id ="datediv" style="position:absolute; visibility:hidden">
		</div>
		</div>
		<script>
			paddingX = 100
			paddingY = 50
			// function to transform data
			function createTransform(domain, range){
				var alpha = (range[1] - range[0]) / (domain[1] - domain[0]);
				var beta = range[0] - (alpha * domain[0])
				return function(x){
				return alpha * x + beta;
				};
			};
			// Parse JSON data
			var jsonDataSet = document.getElementById('dataset').value;
			var jsondata = JSON.parse(jsonDataSet);
			// Initiate Drawing
			var canvas = document.getElementById('canvas');
			var ctx = canvas.getContext('2d');
			// Y-axis
			ctx.beginPath();
			ctx.strokestyle = 'black';
			ctx.moveTo(paddingX, 50);
			ctx.lineTo(paddingX, 400);
			ctx.stroke();
			// X-axis
			ctx.beginPath();
			ctx.strokeStyle = 'black';
			ctx.moveTo(paddingX,400);
			ctx.lineTo(800,400);
			ctx.stroke();
			// create scales
			var xtransform = createTransform([0, 365], [paddingX, 800]);
			var ytransform = createTransform([-50, 300], [400, paddingY]);
			var xtransform_reverse = createTransform([paddingX, 800], [0, 365])
			var start = jsondata[0][0];
			// plot of data
			ctx.beginPath();
			for (var i = 0; i < jsondata.length -1; i++){
				ctx.moveTo(xtransform(i), ytransform(jsondata[i][1]));
				ctx.lineTo(xtransform(i+1), ytransform(jsondata[i + 1][1]));
			};
			ctx.stroke()
			// add 0 degrees line
			ctx.beginPath();
			ctx.setLineDash([10, 10]);
			ctx.strokeStyle = 'blue';
			ctx.moveTo(paddingX, 346);
			ctx.lineTo(800, 346);
			ctx.stroke();

			// values for axis
			var months = ["April", "May", "June", "July", "August", "September", "October", "November", "December", "January", "February", "March"]
			var Temperatures = ["-5", "0", "5", "10", "15", "20", "25", "30", "35", "40"]
			// for loop for adding value on X-axis
			ctx.font = "12px Arial";
			for (var i = 0; i < 12; i++){
				ctx.beginPath();
				ctx.strokeStyle = 'black';
				ctx.moveTo((paddingX + (800/(13)* (i))), 400);
				ctx.lineTo((paddingX + (800/(13)* (i))), 410);
				ctx.stroke();
				ctx.fillText(months[i], ((800/13) * (i + 1)) + 30, 420)
			};
			// adding value on Y-axis
			for (var i = 0; i < 7; i++){
				ctx.beginPath();
				ctx.strokeStyle = 'black';
				ctx.moveTo(paddingX, ytransform(-50 + (i * 54)));
				ctx.lineTo((paddingX - 10), ytransform(-50 + (i * 54)));
				ctx.stroke();
				ctx.fillText(Temperatures[i], (paddingX - 30), ytransform(-54 + (i * 54)))
			};
			// adding X-title
			ctx.font = "30px Arial"
			ctx.fillText("Month of year", 400, 500);
			// adding Y-title
			ctx.rotate( Math.PI / 2 );
			ctx.textAlign = "left";
			ctx.fillText( "T in Celsius", 150, 0 );
			ctx.restore();

			// Defining second canvas
			var crosshair = document.getElementById('crosshair');
			var context = crosshair.getContext('2d');

			// all functions used in crosshair rendering

			// finding coordinates for mouse
			function Tracer(canvas, event) {
    			var mouseinfo = canvas.getBoundingClientRect();
    			return {
    				x: event.clientX - mouseinfo.left,
    			}};
			// draw hairs for crosshair
			function linedraw(X, Y) {
				context.clearRect(0, 0, canvas.width, canvas.height);
				context.beginPath();
				//left hair
				context.moveTo((paddingX), Y);
				context.lineTo((X - 8), Y);
				//right hair
				context.moveTo((X + 8), Y);
				context.lineTo(800, Y);
				// upper hair
				context.moveTo(X, Y - 8);
				context.lineTo(X, 0);
				// lower hair
				context.moveTo(X, Y + 8);
				context.lineTo(X, 400);
				context.arc(X, Y, 8, 0 , 2 * Math.PI, false);
				context.arc(X, Y, 4, 0 , 2 * Math.PI, false);
				context.stroke();
			}
			// transform x to y coordinate on line
			function xytransform (X) {
				var xtransform_reverse = createTransform([paddingX, 800], [0, 365]);
				var xdate = Math.round(xtransform_reverse(event.clientX));
				var ytemp = ytransform(jsondata[xdate][1]);
				// console.log(ytemp)
				return ytemp;
			};

			// variables for div
			// make div move
			function divmove (X, Y, jsondata) {
				var xtrans = createTransform([paddingX, 800], [0, 365]);
				var xdate = Math.round(xtrans(X));
				var tempdiv = document.getElementById("tempdiv");
				var datediv = document.getElementById("datediv");
				tempdiv.style.visibility = 'hidden';
				tempdiv.innerHTML =(Math.round(jsondata[xdate][1] * 0.1) + " &degC");
				tempdiv.style.left = (X - 150) + 'px';
				tempdiv.style.top = (Y - 20) + 'px';
				datediv.style.visibility = "hidden";
				datediv.innerHTML =(jsondata[xdate][0]);
				datediv.style.left = (X + 150) + 'px';
				datediv.style.top = (Y - 20) + 'px';
				setTimeout(function(){
					tempdiv.style.visibility = 'visible'
					datediv.style.visibility = 'visible'
				}, 1000);
   			};


			// add listener and reaction to mouse
			crosshair.addEventListener('mousemove', function(event) {
				var position = Tracer(crosshair, event);
				var Ycoor = xytransform(position.x);				
				// circledraw(position.x, xytransform(position.x));
				linedraw((position.x), Ycoor);
				divmove(position.x, Ycoor, jsondata);
			});



		</script>
	</body>
</html>